import{_ as x,u as E,a as N,b as Q}from"./index-fTqu791Z.js";import{i as o,q as s,ah as X,d as V,a as v,c as $,f as u,x as c,k as m,F as T,t as d,l as k,j as f,A as O,ai as Y,aj as q,n as l,v as L,s as D,w as Z,z as j,ak as ee,L as G,B as te}from"./vue-6PFCaG3D.js";import{F as U}from"./feature-flags-cof9wo1L.js";import{T as ae}from"./kongponents-3HpDyT6r.js";import"./specRenderer-IjoYWasr.js";const oe={xmlns:"http://www.w3.org/2000/svg",width:"263",height:"144",fill:"none"},se=X('<rect width="100" height="120" x="163" y="24" fill="var(--section_colors-tertiary)" rx="8"></rect><rect width="98" height="118" x="164" y="25" stroke="var(--section_colors-stroke)" stroke-dasharray="8 4" stroke-linejoin="round" stroke-width="2" rx="7"></rect><rect width="100" height="120" y="24" fill="var(--section_colors-tertiary)" rx="8"></rect><rect width="98" height="118" x="1" y="25" stroke="var(--section_colors-stroke)" stroke-dasharray="8 4" stroke-linejoin="round" stroke-width="2" rx="7"></rect><g filter="url(#a)"><rect width="100" height="120" x="81" y="2" fill="var(--section_colors-tertiary)" rx="8"></rect><rect width="98" height="118" x="82" y="3" stroke="var(--section_colors-stroke)" stroke-dasharray="8 4" stroke-linejoin="round" stroke-width="2" rx="7"></rect></g><path fill="var(--section_colors-stroke)" d="M128.911 68.506c.028-1.6.217-2.864.566-3.793.35-.927 1.062-1.956 2.138-3.086l2.746-2.724c1.174-1.278 1.761-2.65 1.761-4.115 0-1.413-.384-2.516-1.153-3.31-.768-.806-1.886-1.21-3.354-1.21-1.425 0-2.571.364-3.437 1.09-.867.726-1.3 1.701-1.3 2.925H123c.028-2.179.831-3.934 2.411-5.266 1.593-1.345 3.661-2.017 6.204-2.017 2.641 0 4.696.686 6.163 2.058 1.481 1.358 2.222 3.228 2.222 5.608 0 2.354-1.132 4.674-3.396 6.96l-2.285 2.18c-1.02 1.09-1.53 2.656-1.53 4.7h-3.878zm-.167 6.396c0-.605.188-1.11.565-1.513.392-.417.965-.626 1.719-.626.755 0 1.328.209 1.719.626.392.403.587.908.587 1.513 0 .605-.195 1.11-.587 1.513-.391.39-.964.585-1.719.585-.754 0-1.327-.195-1.719-.585-.377-.404-.565-.908-.565-1.513z"></path><defs><filter id="a" width="108" height="128" x="77" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"></feColorMatrix><feOffset dy="2"></feOffset><feGaussianBlur stdDeviation="2"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"></feColorMatrix><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"></feBlend><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"></feBlend></filter></defs>',7),ne=[se];function ie(e,t){return o(),s("svg",oe,[...ne])}const re={render:ie},le=V({name:"LabelRenderer",components:{KTruncate:ae},props:{labels:{type:Array,required:!0}},setup(e){const t=v(!1),a=5,g=$(()=>t.value?e.labels:e.labels.slice(0,a)),r=$(()=>e.labels.length>a),b=$(()=>t.value?"Show less":`...and ${e.labels.length-a} more`);return{visibleLabels:g,hasMoreLabels:r,showMoreText:b,toggleExpand:()=>{t.value=!t.value}}}}),ce={class:"label-renderer"};function de(e,t,a,g,r,b){const i=u("KBadge"),n=u("KTruncate");return o(),s("div",ce,[c(n,{rows:2},{default:m(()=>[(o(!0),s(T,null,O(e.labels,p=>(o(),f(i,{key:p.key,"background-color":"var(--section_colors-accent)",class:"product-public-label",color:"var(--text_colors-secondary)"},{default:m(()=>[k(d(p.key)+": "+d(p.value),1)]),_:2},1024))),128))]),_:1})])}const ue=x(le,[["render",de],["__scopeId","data-v-c69757d1"]]),pe={name:"CatalogItem",components:{PublicLabels:ue,RouterLink:Y},props:{product:{type:Object,default:()=>{}},loading:{type:Boolean,default:!1}},data(){const e=E().state.helpText.catalogItem,t=N(U.publicLabelsUI,!1),a=N(U.cacheBustSpecLinks,!1),g=q();return{helpText:e,publicLabelsUIEnabled:t,router:g,cacheBustSpecLinks:a}},computed:{version(){return this.product.latestVersion},versionLabel(){return this.product.versionCount===1?"Version: ":"Versions: "}}},ge={key:0,class:"products-card-title"},he={key:1},me=["href"],fe={class:"products-card-title truncate"},_e={class:"products-card-title truncate"},be={class:"description color-text_colors-secondary"},ve={class:"mt-auto pt1"},ke={class:"details-item"},ye={key:0,class:"my-2 color-text_colors-secondary"},we={class:"mr-2"},Ce={key:0,class:"details-item"},Pe={key:0,class:"my-2 color-text_colors-secondary"},Le={class:"docs-links"},Te={key:0,class:"details-item"},Be=["href"],Se={key:1,class:"details-item"};function xe(e,t,a,g,r,b){const i=u("KSkeletonBox"),n=u("router-link"),p=u("KBadge"),_=u("PublicLabels"),y=u("KIcon"),B=u("KCard");return o(),f(B,{class:"show-docs"},{title:m(()=>[a.loading?(o(),s("p",ge,[c(i,{width:"10"})])):(o(),s("div",he,[r.cacheBustSpecLinks?(o(),s("a",{key:0,href:`/spec/${a.product.id}`},[l("p",fe,d(a.product.title),1)],8,me)):(o(),f(n,{key:1,to:`/spec/${a.product.id}`},{default:m(()=>[l("p",_e,d(a.product.title),1)]),_:1},8,["to"]))]))]),body:m(()=>{var w;return[l("p",be,[a.loading?(o(),s(T,{key:0},[c(i,{width:"100"}),c(i,{width:"50"}),c(i,{width:"75"})],64)):(o(),s(T,{key:1},[k(d(a.product.description),1)],64))]),l("ul",ve,[l("li",ke,[b.version?(o(),s("span",ye,[a.loading?(o(),f(i,{key:0,width:"2"})):(o(),s(T,{key:1},[l("span",we,d(r.helpText.latestVersion),1),c(p,{color:"var(--text_colors-secondary)","background-color":"var(--section_colors-accent)",class:"product-version"},{default:m(()=>[k(d(b.version.name),1)]),_:1})],64))])):L("",!0)]),r.publicLabelsUIEnabled?(o(),s("li",Ce,[a.product.publicLabels.length?(o(),s("span",Pe,[a.loading?(o(),f(i,{key:0,width:"2"})):(o(),f(_,{key:1,labels:a.product.publicLabels},null,8,["labels"]))])):L("",!0)])):L("",!0),l("li",Le,[a.product.showSpecLink?(o(),s("div",Te,[a.loading?(o(),f(i,{key:0,width:"50"})):(o(),s(T,{key:1},[r.cacheBustSpecLinks?(o(),s("a",{key:0,href:(w=r.router.resolve({name:"spec",params:{product:a.product.id}}))==null?void 0:w.path,class:"link"},[k(d(r.helpText.specificationLink)+" ",1),c(y,{icon:"arrowRight",size:"16",color:"var(--text_colors-link)",class:"link-icon"})],8,Be)):(o(),f(n,{key:1,to:{name:"spec",params:{product:a.product.id}},class:"link"},{default:m(()=>[k(d(r.helpText.specificationLink)+" ",1),c(y,{icon:"arrowRight",size:"16",color:"var(--text_colors-link)",class:"link-icon"})]),_:1},8,["to"]))],64))])):L("",!0),a.product.documentCount?(o(),s("div",Se,[a.loading?(o(),f(i,{key:0,width:"50"})):(o(),f(n,{key:1,to:{name:"api-documentation-page",params:{product:a.product.id}},class:"link"},{default:m(()=>[k(d(r.helpText.documentationLink)+" ",1),c(y,{icon:"arrowRight",size:"16",color:"var(--text_colors-link)",class:"link-icon"})]),_:1},8,["to"]))])):L("",!0)])])]}),_:1})}const Ie=x(pe,[["render",xe],["__scopeId","data-v-3f274d9f"]]),$e={name:"CatalogCardList",components:{CatalogItem:Ie},props:{products:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}}},Ve={class:"container max-w-screen-2xl mx-auto catalog-card-view"},Fe={class:"w-full grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5"};function Ke(e,t,a,g,r,b){const i=u("CatalogItem");return o(),s("div",Ve,[l("div",Fe,[(o(!0),s(T,null,O(a.products,(n,p)=>(o(),f(i,{key:n.id+p,class:"catalog-item",product:n,"has-documentation":n.documentCount>0,loading:a.loading},null,8,["product","has-documentation","loading"]))),128))])])}const Ae=x($e,[["render",Ke]]),ze=V({name:"PaginationBar",props:{totalCount:{type:Number,default:0},pageSize:{type:Number,default:12},searchTriggered:Boolean},emits:["pageChanged"],data(){return{currentPage:1,buttonDisabled:"pageBack"}},watch:{searchTriggered(e){e===!0&&this.returnToFirstPage()}},methods:{getPaginationString(){let e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return e++,t>this.totalCount&&(t=this.totalCount),e+" - "+t+" of "+this.totalCount},pageForward(){if(this.buttonDisabled==="pageForward")return;this.currentPage++,(this.currentPage-1)*this.pageSize+this.pageSize>=this.totalCount?this.buttonDisabled="pageForward":this.buttonDisabled="",this.$emit("pageChanged",this.currentPage)},pageBack(){this.buttonDisabled!=="pageBack"&&(this.currentPage--,this.currentPage===1?this.buttonDisabled="pageBack":this.buttonDisabled="",this.$emit("pageChanged",this.currentPage))},returnToFirstPage(){this.buttonDisabled="pageBack",this.currentPage=1,this.$emit("pageChanged",this.currentPage)},goToLastPage(){this.buttonDisabled="pageForward",this.currentPage=Math.ceil(this.totalCount/this.pageSize),this.$emit("pageChanged",this.currentPage)}}}),De={key:0,class:"card-pagination-bar flex items-center justify-end"},Ee={class:"pagination-text type-lg color-text_colors-secondary mr-4"};function Re(e,t,a,g,r,b){const i=u("KIcon");return!e.searchTriggered&&e.totalCount>e.pageSize?(o(),s("div",De,[l("span",Ee,d(e.getPaginationString()),1),l("div",null,[l("button",{class:D(["pagination-button",e.buttonDisabled==="pageBack"?"disabled":""]),"data-testid":"pagination-first",onClick:t[0]||(t[0]=(...n)=>e.returnToFirstPage&&e.returnToFirstPage(...n))},[c(i,{width:"16",height:"16","view-box":"0 0 16 16",icon:"collapseExpand"})],2),l("button",{class:D(["pagination-button",e.buttonDisabled==="pageBack"?"disabled":""]),"data-testid":"pagination-backwards",onClick:t[1]||(t[1]=(...n)=>e.pageBack&&e.pageBack(...n))},[c(i,{width:"16",height:"16","view-box":"0 0 16 8",icon:"back"})],2),l("button",{class:D(["pagination-button",e.buttonDisabled==="pageForward"?"disabled":""]),"data-testid":"pagination-forwards",onClick:t[2]||(t[2]=(...n)=>e.pageForward&&e.pageForward(...n))},[c(i,{width:"16",height:"16","view-box":"0 0 16 8",icon:"forward"})],2),l("button",{class:D(["pagination-button",e.buttonDisabled==="pageForward"?"disabled":""]),"data-testid":"pagination-last",onClick:t[3]||(t[3]=(...n)=>e.goToLastPage&&e.goToLastPage(...n))},[c(i,{icon:"collapseExpand",class:"kong-pag-last",width:"16",height:"16","view-box":"0 0 16 16"})],2)])])):L("",!0)}const Me=x(ze,[["render",Re],["__scopeId","data-v-d5c696bf"]]),je={class:"max-w-screen-2xl mx-auto"},Ne={key:0},Ue=V({__name:"CatalogTableList",props:{products:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(e){const t=e,a=q(),g=E().state.helpText.catalogTable,r=v(0),b=$(()=>r.value.toString()),i=()=>{r.value+=1};function n(B,w){a.push({path:`/spec/${w.id}`})}function p(){return{total:t.products.length,data:t.products}}Z(()=>t.products,()=>{i()},{deep:!0});const _=N(U.publicLabelsUI,!1),y=$(()=>[{label:"Title",key:"title"},{label:"Description",key:"description"},{label:"Latest Version",key:"latestVersion"},..._?[{label:"Public Labels",key:"publicLabels"}]:[],{label:"Details",key:"links"}]);return(B,w)=>{const F=u("KBadge"),K=u("router-link"),R=u("KTable");return o(),s("div",je,[c(R,{fetcher:p,"fetcher-cache-key":b.value,"has-side-border":"",headers:y.value,"is-small":"","is-loading":e.loading,"is-clickable":"","disable-pagination":"","onRow:click":n},{title:m(({rowValue:h})=>[k(d(h),1)]),publicLabels:m(({row:h})=>[j(_)?(o(),s("div",Ne,[(o(!0),s(T,null,O(h.publicLabels,I=>(o(),s("div",{key:I.key},[c(F,{color:"var(--text_colors-secondary)","background-color":"var(--section_colors-accent)",class:"product-public-label"},{default:m(()=>[k(d(I.key)+": "+d(I.value),1)]),_:2},1024)]))),128))])):L("",!0)]),latestVersion:m(({row:h})=>[l("div",null,[h.latestVersion?(o(),f(F,{key:0,color:"var(--text_colors-secondary)","background-color":"var(--section_colors-accent)",class:"product-version"},{default:m(()=>[k(d(h.latestVersion.name),1)]),_:2},1024)):L("",!0)])]),links:m(({row:h})=>[h.showSpecLink?(o(),f(K,{key:0,"data-testid":`spec-link-${h.id}`,to:{name:"spec",params:{product:h.id}},class:"link"},{default:m(()=>[k(d(j(g).specificationLink),1)]),_:2},1032,["data-testid","to"])):L("",!0),h.documentCount?(o(),f(K,{key:1,"data-testid":`docs-link-${h.id}`,to:{name:"api-documentation-page",params:{product:h.id}},class:"link"},{default:m(()=>[k(d(j(g).documentationLink),1)]),_:2},1032,["data-testid","to"])):L("",!0)]),_:1},8,["fetcher-cache-key","headers","is-loading"])])}}}),Oe=x(Ue,[["__scopeId","data-v-81d3c34a"]]),Ge=V({name:"Catalog",components:{CatalogCardList:Ae,CatalogTableList:Oe,PaginationBar:Me,EmptyState:re},props:{catalogItems:{type:Array,default:()=>[]},cardsPerPage:{type:Number,default:12},totalCount:{type:Number,default:0},searchTriggered:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["list-page-changed","active-view-changed"],setup(){const e=E().state.helpText.catalog,t=e.entityTypeProduct,a=e.noResultsProduct;return{helpText:e,catalogTitle:t,noResultsMessage:a}},data(){return{activeView:"grid"}},computed:{disabled(){return this.catalogItems.length===0?!0:null}},mounted(){const e=localStorage.getItem("portal-catalog-view")||"grid";this.setActiveView(e)},methods:{setActiveView(e){this.activeView=e,localStorage.setItem("portal-catalog-view",e),this.$emit("active-view-changed",e)}}}),qe={class:"products-content px-5"},He={class:"container max-w-screen-2xl mx-auto mt-6 mb-5 flex justify-between"},We={class:"products-label"},Je={key:0,class:"product-catalog-empty-state"},Qe={class:"product-catalog-no-products type-lg color-text_colors-secondary"},Xe={key:1,class:"product-catalog-loading-spinner"},Ye={key:1,class:"list-wrapper"};function Ze(e,t,a,g,r,b){const i=u("KViewSwitcher"),n=u("EmptyState"),p=u("KSkeleton"),_=u("CatalogCardList"),y=u("CatalogTableList"),B=u("PaginationBar");return o(),s("div",qe,[l("div",He,[l("span",We,d(e.catalogTitle),1),c(i,{"data-testid":"view-switcher",disabled:e.disabled,view:e.activeView,onViewChanged:e.setActiveView},null,8,["disabled","view","onViewChanged"])]),e.catalogItems.length?(o(),s("div",Ye,[e.activeView=="grid"?(o(),f(_,{key:0,products:e.catalogItems,loading:e.loading},null,8,["products","loading"])):(o(),f(y,{key:1,products:e.catalogItems,loading:e.loading},null,8,["products","loading"])),c(B,{class:"pagination-bar container max-w-screen-2xl mx-auto","page-size":e.cardsPerPage,"total-count":e.totalCount,"search-triggered":e.searchTriggered,onPageChanged:t[0]||(t[0]=w=>e.$emit("list-page-changed",w))},null,8,["page-size","total-count","search-triggered"])])):(o(),s("div",Je,[l("div",Qe,[e.loading?(o(),s("div",Xe,[c(p,{"delay-milliseconds":0})])):(o(),s(T,{key:0},[c(n,{class:"mb-2 mx-auto"}),k(" "+d(e.noResultsMessage),1)],64))])]))])}const et=x(Ge,[["render",Ze],["__scopeId","data-v-8f373fa6"]]);function tt(e,t=300){let a;return function(...g){const r=this;a&&clearTimeout(a),a=setTimeout(function(){e.apply(r,g),a=null},t)}}const at=V({name:"ProductCatalogWrapper",components:{Catalog:et},setup(){const e=v({backgroundImage:""}),t=v(""),a=v(""),g=v(12),r=v(""),b=v([]),i=v(void 0),n=v(!0),p=v(!1),_=v(void 0),y=v(1),B=E().state.helpText.products,{portalApiV2:w}=Q(),F=async()=>w.value.service.portalApi.getPortalAppearance().then(C=>{const S=C.data.variables.catalog;if(S.welcome_message&&(t.value=S.welcome_message.text),S.primary_header&&(a.value=S.primary_header.text),S.cover){const M=w.value.getApiLink("/api/v2/portal/catalog-cover");e.value.backgroundImage=`url(${M})`}}).catch(C=>{console.error("Failed to load appearance.",C)}).then(K),K=()=>{t.value||(t.value="Welcome to our API Portal!"),a.value||(a.value="Start building and innovating with our APIs")},R=tt(async()=>{p.value=!0,y.value=1;try{return await h()}finally{p.value=!1}}),h=async()=>{n.value=!0;try{try{const{data:C}=await w.value.service.searchApi.searchPortalEntities({indices:"product-catalog",q:r.value,pageNumber:y.value,pageSize:g.value,join:"versions"}),{data:S,meta:M}=C;b.value=await Promise.all(S.map(async({source:P})=>{let A=!1;P.latest_version&&await w.value.service.versionsApi.getProductVersionSpec({productId:P.id,productVersionId:P.latest_version.id}).then(z=>{z.status===200?A=!0:z.status===204&&(A=!1)}).catch(()=>{A=!1});const W=P.public_labels?Object.entries(P.public_labels).map(([z,J])=>({key:z,value:J})):[];return{id:P.id,title:P.name,latestVersion:P.latest_version,showSpecLink:A,description:P.description,documentCount:P.document_count,versionCount:P.version_count,publicLabels:W}})),i.value=M.page.total}catch(C){console.error("failed to find Service Packages",C)}}finally{n.value=!1}},I=C=>{_.value=C},H=C=>{y.value=C,p.value||h()};return ee(async()=>{await Promise.all([F(),h()])}),{catalog_cover_style:e,welcome_message:t,primary_header:a,cardsPerPage:g,searchString:r,catalogItems:b,totalCount:i,loading:n,searchTriggered:p,catalogView:_,catalogPageNumber:y,helpText:B,searchProducts:R,catalogViewChanged:I,catalogPageChanged:H}}}),ot={class:"dev-portal-products"},st={class:"products-welcome mb-4 font-normal color-text_colors-secondary text-2xl"},nt={class:"products-title mb-5 font-normal color-text_colors-hero text-4xl"},it={class:"w-full max-w-lg mx-auto inline-flex"};function rt(e,t,a,g,r,b){const i=u("KInput"),n=u("KButton"),p=u("Catalog");return o(),s("div",ot,[l("div",{class:"products-top-section flex flex-col items-center justify-center py-16 bg-section_colors-hero",style:te(e.catalog_cover_style)},[l("h4",st,d(e.welcome_message),1),l("h1",nt,d(e.primary_header),1),l("div",it,[l("form",{id:"searchProductsForm",onSubmit:t[1]||(t[1]=G((..._)=>e.searchProducts&&e.searchProducts(..._),["prevent"])),onReset:t[2]||(t[2]=G((..._)=>e.searchProducts&&e.searchProducts(..._),["prevent"]))},[c(i,{modelValue:e.searchString,"onUpdate:modelValue":t[0]||(t[0]=_=>e.searchString=_),class:"k-input--full",size:"small",type:"search",placeholder:e.helpText.search,"data-testid":"catalog-search",form:"searchProductsForm",onInput:e.searchProducts},null,8,["modelValue","placeholder","onInput"]),c(n,{form:"searchProductsForm",appearance:"primary","data-testid":"catalog-search-button",type:"submit",size:"small",disabled:e.loading,"is-rounded":!1},{default:m(()=>[k(d(e.searchString!==""&&e.loading?e.helpText.searching:e.helpText.search),1)]),_:1},8,["disabled"])],32)])],4),c(p,{"catalog-items":e.catalogItems,"cards-per-page":e.cardsPerPage,"total-count":e.totalCount,"search-triggered":e.searchTriggered,loading:e.loading,onActiveViewChanged:e.catalogViewChanged,onListPageChanged:e.catalogPageChanged},null,8,["catalog-items","cards-per-page","total-count","search-triggered","loading","onActiveViewChanged","onListPageChanged"])])}const gt=x(at,[["render",rt]]);export{gt as default};
